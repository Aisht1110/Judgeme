<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <meta name="theme-color" content="#6366f1"/>
  <meta name="apple-mobile-web-app-capable" content="yes"/>
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
  <title>CharacterMeter • Character Judge</title>

  <script src="https://cdn.tailwindcss.com"></script>

  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Montserrat', ui-sans-serif, system-ui, sans-serif;
      background:
        radial-gradient(1200px 600px at 10% 10%, rgba(99,102,241,0.10), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(34,211,238,0.12), transparent 60%),
        linear-gradient(135deg, #f3e8ff 0%, #e0f2fe 100%);
      min-height: 100vh;
      -webkit-tap-highlight-color: transparent;
      -webkit-touch-callout: none;
      -webkit-user-select: none;
      user-select: none;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: #f1f1f1; }
    ::-webkit-scrollbar-thumb { background: #a78bfa; border-radius: 10px; }
    ::-webkit-scrollbar-thumb:hover { background: #8b5cf6; }

    /* Animations */
    @keyframes subtle-pulse { 
      0%,100%{ box-shadow:0 0 0 0 rgba(109,40,217,.28);} 
      50%{ box-shadow:0 0 24px 8px rgba(109,40,217,.18);} 
    }

    @keyframes gradient-x {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    @keyframes bounce-slow {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-20px); }
    }

    @keyframes slide-up {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    @keyframes slide-in-right {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes slide-in-left {
      from { transform: translateX(-100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    @keyframes scale-in {
      from { transform: scale(0.8); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    @keyframes fade-in {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes confetti-fall {
      0% { transform: translateY(-100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-10px) rotate(2deg); }
      66% { transform: translateY(-5px) rotate(-2deg); }
    }

    @keyframes rotate-gradient {
      0% { transform: rotate(0deg) scale(1); }
      50% { transform: rotate(180deg) scale(1.1); }
      100% { transform: rotate(360deg) scale(1); }
    }

    @keyframes swipe-hint {
      0%, 100% { transform: translateX(0); opacity: 0.5; }
      50% { transform: translateX(10px); opacity: 1; }
    }

    @keyframes progress-pulse {
      0%, 100% { opacity: 1; transform: scaleY(1); }
      50% { opacity: 0.8; transform: scaleY(0.95); }
    }

    @keyframes bounce-in {
      0% { transform: scale(0) rotate(-180deg); opacity: 0; }
      50% { transform: scale(1.2) rotate(10deg); }
      100% { transform: scale(1) rotate(0deg); opacity: 1; }
    }

    @keyframes shimmer {
      0% { background-position: -1000px 0; }
      100% { background-position: 1000px 0; }
    }

    /* Glass morphism effect */
    .glass-card { 
      background: rgba(255,255,255,0.85); 
      backdrop-filter: blur(18px) saturate(120%); 
      -webkit-backdrop-filter: blur(18px) saturate(120%); 
      border: 1px solid rgba(148,163,184,0.22); 
    }

    .glass-card-dark { 
      background: rgba(255,255,255,0.95); 
      backdrop-filter: blur(20px) saturate(130%); 
      -webkit-backdrop-filter: blur(20px) saturate(130%); 
      border: 2px solid rgba(148,163,184,0.3); 
    }

    /* Premium button styles */
    .cta {
      position: relative; 
      background-image: linear-gradient(92deg,#6366f1 0%,#22d3ee 100%); 
      color:#fff;
      box-shadow: 0 10px 20px rgba(99,102,241,.35), inset 0 1px 0 rgba(255,255,255,.25);
      transition: transform .2s cubic-bezier(.2,.7,.3,1), box-shadow .2s, filter .2s; 
      isolation:isolate;
      overflow: hidden;
    }

    .cta::before{
      content:""; 
      position:absolute; 
      inset:1px; 
      border-radius:inherit; 
      background: radial-gradient(120% 100% at 50% 0%, rgba(255,255,255,.22), transparent 55%); 
      pointer-events:none; 
      z-index:0;
    }

    .cta::after{
      content:""; 
      position:absolute; 
      top:0; 
      left:-150%; 
      width:150%; 
      height:100%; 
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      animation: shimmer 3s infinite;
      z-index:1;
    }

    .cta:hover { 
      transform:translateY(-2px); 
      box-shadow:0 14px 32px rgba(99,102,241,.42), inset 0 1px 0 rgba(255,255,255,.3); 
    }

    .cta:active { 
      transform:translateY(0) scale(0.98); 
      box-shadow:0 6px 12px rgba(99,102,241,.3); 
    }

    /* Animation classes */
    .animate-gradient { 
      background-size: 200% auto; 
      animation: gradient-x 3s ease infinite; 
    }

    .animate-bounce-slow { animation: bounce-slow 2s infinite ease-in-out; }
    .animate-slide-up { animation: slide-up 0.6s ease-out; }
    .animate-slide-in-right { animation: slide-in-right 0.5s ease-out; }
    .animate-slide-in-left { animation: slide-in-left 0.5s ease-out; }
    .animate-scale-in { animation: scale-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
    .animate-fade-in { animation: fade-in 0.8s ease-out; }
    .animate-confetti { animation: confetti-fall linear forwards; }
    .animate-float { animation: float 4s ease-in-out infinite; }
    .animate-bounce-in { animation: bounce-in 0.8s cubic-bezier(0.34, 1.56, 0.64, 1); }
    .swipe-hint { animation: swipe-hint 2s ease-in-out infinite; }
    .progress-pulse { animation: progress-pulse 1.5s ease-in-out infinite; }

    /* Result circle with rotating gradient */
    .result-circle {
      position: relative;
    }

    .result-circle::before {
      content: '';
      position: absolute;
      inset: -5px;
      border-radius: 50%;
      background: linear-gradient(45deg, #6366f1, #22d3ee, #ec4899, #f59e0b, #6366f1);
      background-size: 300% 300%;
      z-index: -1;
      animation: rotate-gradient 4s linear infinite;
      opacity: 0.6;
      filter: blur(10px);
    }

    /* Mobile optimizations */
    @media (max-width: 768px) {
      body { font-size: 14px; }
      .mobile-touch-target { 
        min-height: 44px; 
        min-width: 44px; 
        touch-action: manipulation;
      }
      .mobile-card-spacing { gap: 12px; }

      /* Prevent text selection on mobile */
      * {
        -webkit-tap-highlight-color: transparent;
        -webkit-touch-callout: none;
      }

      /* Smooth scrolling for mobile */
      html {
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
      }
    }

    /* Loading spinner */
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .animate-spin { animation: spin 1s linear infinite; }

    /* Pulse animation */
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }

    /* Score number animation */
    .score-digit {
      display: inline-block;
      animation: bounce-in 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
    }

    .score-digit:nth-child(1) { animation-delay: 0.1s; }
    .score-digit:nth-child(2) { animation-delay: 0.2s; }
    .score-digit:nth-child(3) { animation-delay: 0.3s; }

    /* Option selection effect */
    .option-selected {
      animation: bounce-in 0.3s ease-out;
    }

    /* Mobile menu animations */
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .mobile-menu-open {
      animation: slideDown 0.3s ease-out;
    }

    /* Hover glow effect */
    .glow-on-hover {
      transition: all 0.3s ease;
    }

    .glow-on-hover:hover {
      box-shadow: 0 0 20px rgba(99, 102, 241, 0.6), 
                  0 0 40px rgba(99, 102, 241, 0.4),
                  0 0 60px rgba(99, 102, 241, 0.2);
    }

    /* Character type badge animation */
    .character-badge {
      transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    .character-badge:hover {
      transform: translateY(-5px) scale(1.05);
    }

    /* Progress bar glow */
    .progress-bar-glow {
      box-shadow: 0 0 10px rgba(99, 102, 241, 0.5),
                  0 0 20px rgba(99, 102, 241, 0.3),
                  0 0 30px rgba(99, 102, 241, 0.1);
    }
  </style>
</head>
<body>

  <div id="app"></div>

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, useCallback, useMemo, useRef } = React;

    // ============= CONFIGURATION CONSTANTS =============
    const CHARACTER_TYPES = [
      { 
        range: [90, 100], 
        name: "Pure Soul", 
        color: "from-green-400 to-emerald-600", 
        textColor: "text-green-600",
        badge: "bg-green-100", 
        borderColor: "border-green-400",
        emoji: "✨",
        icon: "❤️",
        description: "Your moral compass is unwavering. You embody virtue, empathy, and idealism. You see the best in people and situations.",
        traits: ["Empathetic", "Honest", "Compassionate", "Selfless"]
      },
      { 
        range: [70, 89], 
        name: "Realist", 
        color: "from-blue-400 to-cyan-600", 
        textColor: "text-blue-600",
        badge: "bg-blue-100", 
        borderColor: "border-blue-400",
        emoji: "🎯",
        icon: "⚡",
        description: "You balance ethics with pragmatism, navigating life with wisdom and practicality. You understand nuance.",
        traits: ["Practical", "Balanced", "Wise", "Fair-minded"]
      },
      { 
        range: [50, 69], 
        name: "Balanced", 
        color: "from-purple-400 to-pink-600", 
        textColor: "text-purple-600",
        badge: "bg-purple-100", 
        borderColor: "border-purple-400",
        emoji: "⚖️",
        icon: "🎭",
        description: "Your complexity is your strength. You see all perspectives and adapt accordingly. You're neither purely idealistic nor cynical.",
        traits: ["Adaptable", "Complex", "Thoughtful", "Diplomatic"]
      },
      { 
        range: [30, 49], 
        name: "Shadow Thinker", 
        color: "from-yellow-400 to-orange-600", 
        textColor: "text-yellow-600",
        badge: "bg-yellow-100", 
        borderColor: "border-yellow-400",
        emoji: "🤔",
        icon: "🌓",
        description: "Skeptical and introspective, you value self-preservation and questioning the status quo. You see beyond surface appearances.",
        traits: ["Analytical", "Skeptical", "Independent", "Cautious"]
      },
      { 
        range: [0, 29], 
        name: "Rebel Mind", 
        color: "from-red-400 to-rose-600", 
        textColor: "text-red-600",
        badge: "bg-red-100", 
        borderColor: "border-red-400",
        emoji: "🔥",
        icon: "⚔️",
        description: "You challenge norms and prioritize individual freedom above all. You're unafraid to go against the grain.",
        traits: ["Bold", "Unconventional", "Freedom-seeking", "Rebellious"]
      },
    ];

    const QUIZ_DATA = [
      {
        id: 1,
        question: "How would you handle telling a friend a harsh truth that might hurt their feelings?",
        options: [
          { text: "Tell them immediately and directly, regardless of their feelings", weight: 10 },
          { text: "Deliver the truth as gently and tactfully as possible", weight: 5 },
          { text: "Only share if they explicitly asked for my honest opinion", weight: 0 },
          { text: "I would value their immediate happiness over the harsh truth", weight: -5 },
          { text: "It's not my place to interfere with their choices or feelings", weight: -10 }
        ]
      },
      {
        id: 2,
        question: "Regarding deep wrongs done to you, how easy is it for you to offer genuine forgiveness?",
        options: [
          { text: "I forgive easily and fully, seeing it as self-liberation", weight: 10 },
          { text: "I can forgive, but it requires significant time and reflection", weight: 5 },
          { text: "I may try to forgive, but I rarely forget the wrongdoing", weight: 0 },
          { text: "I rarely forgive, as it feels like an erosion of self-respect", weight: -5 },
          { text: "I believe in 'never forget, never forgive' as a defense mechanism", weight: -10 }
        ]
      },
      {
        id: 3,
        question: "If you found a wallet containing $1000 and the owner's ID...",
        options: [
          { text: "Return the entire amount immediately without question or expectation", weight: 10 },
          { text: "Return it, hoping for a small reward but expecting nothing", weight: 5 },
          { text: "I would hesitate, but ultimately return the wallet and contents", weight: 0 },
          { text: "I'd take a small 'finder's fee' for my inconvenience and return the rest", weight: -5 },
          { text: "I would keep the money and dispose of the identification", weight: -10 }
        ]
      },
      {
        id: 4,
        question: "In achieving a great goal, do you believe the ends always justify the means?",
        options: [
          { text: "No, the process and ethics matter most; the means define the goal", weight: 10 },
          { text: "The means are usually more important than the final result", weight: 5 },
          { text: "It depends entirely on the magnitude of the goal and cost of the means", weight: 0 },
          { text: "The ends justify the means if the result significantly benefits society", weight: -5 },
          { text: "Yes, results are everything; ethics are irrelevant in high-stakes situations", weight: -10 }
        ]
      },
      {
        id: 5,
        question: "Which element primarily drives your major life decisions?",
        options: [
          { text: "Deep emotional connection and empathy for those affected", weight: 10 },
          { text: "Mostly emotional conviction, but informed by pragmatic logic", weight: 5 },
          { text: "A conscious effort to achieve perfect balance of logic and emotion", weight: 0 },
          { text: "Mostly logical necessity, tempered by occasional emotional concerns", weight: -5 },
          { text: "Purely rational, detached logical necessity and calculation", weight: -10 }
        ]
      },
      {
        id: 6,
        question: "How do you react to rules, laws, or guidelines you deem pointless or unjust?",
        options: [
          { text: "I follow them while actively and ethically working to change them", weight: 10 },
          { text: "I follow them reluctantly, but respect the system's stability", weight: 5 },
          { text: "I discreetly ignore them if the risk of harm or exposure is negligible", weight: 0 },
          { text: "I actively challenge and break unjust rules to make a statement", weight: -5 },
          { text: "I break any rule I fundamentally disagree with, regardless of consequence", weight: -10 }
        ]
      },
      {
        id: 7,
        question: "Do you enjoy analyzing other people's underlying motives and flaws?",
        options: [
          { text: "No, I instinctively choose to focus on positive intentions", weight: 10 },
          { text: "I observe motives only when necessary, avoiding unnecessary judgment", weight: 5 },
          { text: "I analyze others only if I feel personally threatened or misled", weight: 0 },
          { text: "I enjoy dissecting flaws and motives; it helps me understand human nature", weight: -5 },
          { text: "It's my primary way of dealing with people, assuming ulterior motives first", weight: -10 }
        ]
      },
      {
        id: 8,
        question: "When facing a difficult decision, what do you prioritize?",
        options: [
          { text: "The collective good of the largest group, even if it means personal sacrifice", weight: 10 },
          { text: "The collective good, provided my immediate safety and needs are met", weight: 5 },
          { text: "I strive for an equal and healthy balance between my needs and others'", weight: 0 },
          { text: "My own immediate happiness, followed by consideration for collective good", weight: -5 },
          { text: "My own happiness and advancement, first and foremost", weight: -10 }
        ]
      },
      {
        id: 9,
        question: "How do you genuinely feel when a peer or colleague achieves major success?",
        options: [
          { text: "Genuine excitement, inspiration, and happiness for their accomplishment", weight: 10 },
          { text: "Happy for them, but a small spark of competitive desire ignites within me", weight: 5 },
          { text: "Mostly indifferent, focusing on my own work and achievements", weight: 0 },
          { text: "A mix of annoyance and competitive desire to surpass them quickly", weight: -5 },
          { text: "Pure jealousy, annoyance, and resentment", weight: -10 }
        ]
      },
      {
        id: 10,
        question: "How often do you reflect on your past mistakes and regrets?",
        options: [
          { text: "Regularly, as a vital tool for continuous learning and growth", weight: 10 },
          { text: "I note the lesson quickly and generally move on, avoiding dwelling", weight: 5 },
          { text: "Only when a similar situation arises or when others bring them up", weight: 0 },
          { text: "I strongly prefer not to look backward; it's a waste of energy", weight: -5 },
          { text: "I actively deny or minimize my past mistakes and shift the blame", weight: -10 }
        ]
      },
      {
        id: 11,
        question: "How comfortable are you dealing with moral ambiguity and 'gray' areas?",
        options: [
          { text: "I strongly prefer clear lines of good and bad, avoiding ambiguity", weight: 10 },
          { text: "I prefer clarity but accept that complexity is sometimes unavoidable", weight: 5 },
          { text: "I am comfortable with moral ambiguity and take things case-by-case", weight: 0 },
          { text: "I thrive in moral ambiguity; clear lines feel too restrictive", weight: -5 },
          { text: "I believe everything is morally relative, so clear lines don't exist", weight: -10 }
        ]
      },
      {
        id: 12,
        question: "What is your core belief about human nature?",
        options: [
          { text: "People are inherently good and decent at their core", weight: 10 },
          { text: "People are generally good, but deeply flawed", weight: 5 },
          { text: "People are a blank slate, entirely defined by their environment", weight: 0 },
          { text: "People are inherently self-interested and opportunistic", weight: -5 },
          { text: "People are fundamentally selfish, and goodness is often just a mask", weight: -10 }
        ]
      },
      {
        id: 13,
        question: "If you could gain great personal power by sacrificing the minor well-being of a stranger, would you?",
        options: [
          { text: "No, never, under any circumstances", weight: 10 },
          { text: "I would only consider it if the sacrifice was absolutely trivial", weight: 5 },
          { text: "Only if the resulting power directly benefited all of humanity", weight: 0 },
          { text: "Yes, if the gain for me significantly outweighed the stranger's small loss", weight: -5 },
          { text: "Yes, personal gain and power are worth the small cost to a stranger", weight: -10 }
        ]
      },
      {
        id: 14,
        question: "How important is maintaining appearances (status, wealth, perfection) to you?",
        options: [
          { text: "Not important at all; authenticity is everything to me", weight: 10 },
          { text: "Important only for professional credibility or basic respect", weight: 5 },
          { text: "Moderately important; I like to present myself well", weight: 0 },
          { text: "Very important for success, status, and competitive advantage", weight: -5 },
          { text: "Extremely important; image is everything, regardless of reality", weight: -10 }
        ]
      },
      {
        id: 15,
        question: "Do you actively seek opportunities to help others, even when it's inconvenient?",
        options: [
          { text: "Yes, I regularly look for ways to contribute, even at cost to myself", weight: 10 },
          { text: "I help when asked directly, provided the inconvenience is minimal", weight: 5 },
          { text: "I limit my help primarily to close friends and family", weight: 0 },
          { text: "I avoid inconvenience; my time and resources are too precious", weight: -5 },
          { text: "No, my primary focus and obligation are entirely to myself", weight: -10 }
        ]
      },
      {
        id: 16,
        question: "If a mistake at work significantly harms the company but inadvertently benefits you...",
        options: [
          { text: "Take full, public responsibility and work to fix the harm, even at personal cost", weight: 10 },
          { text: "Take responsibility, but highlight the unintentional positive outcome", weight: 5 },
          { text: "I would subtly allow others to share the blame to protect my career", weight: 0 },
          { text: "I would deny any knowledge and let the company sort out the damage", weight: -5 },
          { text: "I would actively deflect all blame onto an innocent coworker", weight: -10 }
        ]
      },
      {
        id: 17,
        question: "Would you lie under oath (perjury) to save a close family member from serious legal consequences?",
        options: [
          { text: "No, upholding justice and the law is paramount, regardless of personal cost", weight: 10 },
          { text: "It would be agonizing, but I would ultimately choose truth and justice", weight: 5 },
          { text: "I would refuse to testify or find a legal loophole to avoid lying", weight: 0 },
          { text: "I would lie only if the punishment seemed disproportionately harsh", weight: -5 },
          { text: "Yes, familial loyalty transcends all law and abstract justice", weight: -10 }
        ]
      },
      {
        id: 18,
        question: "Do you support comprehensive, real-time government surveillance if it dramatically reduces crime?",
        options: [
          { text: "No, privacy and individual freedom are non-negotiable, even for safety", weight: 10 },
          { text: "I oppose it, but I recognize the complexity of the security argument", weight: 5 },
          { text: "I would reluctantly support it only with extremely strict oversight measures", weight: 0 },
          { text: "Yes, the resulting dramatic reduction in crime justifies complete loss of privacy", weight: -5 },
          { text: "Yes, security is the only measure that truly matters; privacy is an illusion", weight: -10 }
        ]
      },
      {
        id: 19,
        question: "When faced with a deep personal flaw... when do you stop trying to fix it?",
        options: [
          { text: "I never stop; self-improvement is a lifelong, continuous process", weight: 10 },
          { text: "I stop when the effort begins to severely impact my mental health", weight: 5 },
          { text: "I stop when the flaw no longer negatively affects my life or career", weight: 0 },
          { text: "I stop quickly if the flaw is difficult to fix, accepting it as 'who I am'", weight: -5 },
          { text: "I rarely initiate serious attempts to fix fundamental flaws", weight: -10 }
        ]
      },
      {
        id: 20,
        question: "How easily are you moved to action or significant worry by the suffering of people you don't personally know?",
        options: [
          { text: "Extremely easily; I feel a strong, immediate responsibility to help", weight: 10 },
          { text: "Easily, though I usually restrict my actions to donating or raising awareness", weight: 5 },
          { text: "I am saddened, but I prioritize helping those in my immediate circle", weight: 0 },
          { text: "I feel momentary sadness, but my ability to worry is limited to my own problems", weight: -5 },
          { text: "I feel almost no emotional connection or drive to act toward distant suffering", weight: -10 }
        ]
      }
    ];

    // ============= CONFETTI COMPONENT =============
    const Confetti = () => {
      const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#f9ca24', '#6c5ce7', '#a29bfe', '#fd79a8', '#feca57'];
      const pieces = Array.from({ length: 60 }, (_, i) => ({
        id: i,
        left: Math.random() * 100,
        delay: Math.random() * 3,
        duration: 3 + Math.random() * 2,
        color: colors[Math.floor(Math.random() * colors.length)],
        size: 8 + Math.random() * 8,
      }));

      return (
        <div className="fixed inset-0 pointer-events-none z-50 overflow-hidden">
          {pieces.map((p) => (
            <div
              key={p.id}
              className="absolute opacity-0 animate-confetti"
              style={{
                left: p.left + '%',
                backgroundColor: p.color,
                width: p.size + 'px',
                height: p.size + 'px',
                animationDelay: p.delay + 's',
                animationDuration: p.duration + 's',
                transform: 'rotate(45deg)',
                borderRadius: '2px',
              }}
            />
          ))}
        </div>
      );
    };

    // ============= HOME PAGE COMPONENT =============
    const HomePage = ({ onStart }) => {
      return (
        <div className="flex flex-col items-center justify-center min-h-[600px] p-4 md:p-6 text-center animate-fade-in">
          <div className="mb-6 text-6xl md:text-8xl lg:text-9xl animate-bounce-slow">
            🎭
          </div>

          <h1 className="text-4xl md:text-6xl lg:text-7xl font-extrabold text-gray-900 mb-3 md:mb-4 leading-tight px-4">
            Judge
            <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 animate-gradient">
             ME
            </span>
          </h1>

          <p className="text-base md:text-xl lg:text-2xl text-gray-600 max-w-md md:max-w-2xl mb-8 md:mb-10 px-4 leading-relaxed">
            Discover your true moral compass through <span className="font-bold text-purple-600">20 deep psychological questions</span>
          </p>

          <button
            onClick={onStart}
            className="cta px-8 md:px-12 py-4 md:py-5 rounded-full font-bold text-lg md:text-xl shadow-2xl mobile-touch-target glow-on-hover transform hover:scale-105 active:scale-95 transition-all"
          >
            <span className="relative z-10 flex items-center gap-2 md:gap-3">
              <span className="text-2xl">✨</span>
              <span>Start Your Journey</span>
            </span>
          </button>

          <div className="mt-8 flex items-center justify-center gap-4 md:gap-8 text-sm md:text-base text-gray-500 flex-wrap px-4">
            <div className="flex items-center gap-2">
              <div className="w-2 h-2 md:w-3 md:h-3 bg-green-500 rounded-full animate-pulse"></div>
              <span className="font-semibold">5 minutes</span>
            </div>
            <div className="flex items-center gap-2">
              <span className="text-xl md:text-2xl">🏆</span>
              <span className="font-semibold">Free forever</span>
            </div>
            <div className="flex items-center gap-2">
              <span className="text-xl md:text-2xl">🔒</span>
              <span className="font-semibold">Anonymous</span>
            </div>
          </div>

          <div className="mt-12 md:mt-16 lg:mt-20 w-full max-w-6xl px-4">
            <h2 className="text-xl md:text-2xl font-bold text-gray-700 mb-6 md:mb-8">
              Discover Your Character Type
            </h2>
            <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-3 md:gap-4 lg:gap-6">
              {CHARACTER_TYPES.map((type, idx) => (
                <div 
                  key={idx}
                  className="character-badge flex flex-col items-center p-4 md:p-6 glass-card rounded-2xl md:rounded-3xl shadow-lg hover:shadow-2xl cursor-pointer animate-float"
                  style={{ animationDelay: (idx * 0.1) + 's' }}
                >
                  <div className="text-4xl md:text-5xl lg:text-6xl mb-2 md:mb-3">
                    {type.emoji}
                  </div>
                  <div className="text-xs md:text-sm lg:text-base font-bold text-gray-800 text-center leading-tight mb-1">
                    {type.name}
                  </div>
                  <div className="text-xs text-gray-500 text-center">
                    {type.range[0]}-{type.range[1]}
                  </div>
                </div>
              ))}
            </div>
          </div>

          <div className="mt-12 md:mt-16 max-w-2xl px-4">
            <div className="glass-card p-6 md:p-8 rounded-2xl md:rounded-3xl shadow-xl">
              <h3 className="text-lg md:text-xl font-bold text-gray-800 mb-3 md:mb-4 flex items-center justify-center gap-2">
                <span className="text-2xl">💡</span>
                <span>How It Works</span>
              </h3>
              <p className="text-sm md:text-base text-gray-600 leading-relaxed">
                Answer 20 carefully crafted questions about ethics, morality, and decision-making. 
                Each response is weighted and normalized to calculate your unique character score (1-100), 
                revealing your moral archetype.
              </p>
            </div>
          </div>
        </div>
      );
    };

    // ============= QUIZ PAGE COMPONENT =============
    const QuizPage = ({ onComplete }) => {
      const [currentIndex, setCurrentIndex] = useState(0);
      const [answers, setAnswers] = useState({});
      const [slideDirection, setSlideDirection] = useState('right');
      const [touchStart, setTouchStart] = useState(null);
      const [touchEnd, setTouchEnd] = useState(null);
      const [showHint, setShowHint] = useState(true);

      const current = QUIZ_DATA[currentIndex];
      const progress = Math.round(((currentIndex + 1) / QUIZ_DATA.length) * 100);
      const isLastQuestion = currentIndex === QUIZ_DATA.length - 1;
      const hasAnswer = answers[current.id] !== undefined;

      useEffect(() => {
        if (currentIndex > 0) {
          setShowHint(false);
        }
      }, [currentIndex]);

      const handleSelect = (weight) => {
        setAnswers(prev => ({ ...prev, [current.id]: weight }));
        // Haptic feedback
        if (navigator.vibrate) {
          navigator.vibrate(10);
        }
      };

      const handleNext = () => {
        if (!hasAnswer) return;

        if (isLastQuestion) {
          // Calculate final score
          const totalScore = Object.values(answers).reduce((sum, w) => sum + w, 0);
          const minPossible = -200; // 20 questions × -10
          const maxPossible = 200;  // 20 questions × 10
          const normalized = ((totalScore - minPossible) / (maxPossible - minPossible)) * 100;
          const randomness = (Math.random() * 6) - 3; // ±3 points
          const finalScore = Math.max(1, Math.min(100, Math.round(normalized + randomness)));

          onComplete(finalScore);
        } else {
          setSlideDirection('left');
          setTimeout(() => setCurrentIndex(prev => prev + 1), 50);
        }
      };

      const handlePrev = () => {
        if (currentIndex === 0) return;
        setSlideDirection('right');
        setTimeout(() => setCurrentIndex(prev => prev - 1), 50);
      };

      // Touch handlers for swipe gestures
      const minSwipeDistance = 50;

      const onTouchStart = (e) => {
        setTouchEnd(null);
        setTouchStart(e.targetTouches[0].clientX);
      };

      const onTouchMove = (e) => {
        setTouchEnd(e.targetTouches[0].clientX);
      };

      const onTouchEnd = () => {
        if (!touchStart || !touchEnd) return;

        const distance = touchStart - touchEnd;
        const isLeftSwipe = distance > minSwipeDistance;
        const isRightSwipe = distance < -minSwipeDistance;

        if (isLeftSwipe && hasAnswer) {
          handleNext();
        }
        if (isRightSwipe && currentIndex > 0) {
          handlePrev();
        }
      };

      return (
        <div className="flex flex-col h-full max-w-4xl mx-auto p-3 md:p-6">
          {/* Progress Bar */}
          <div className="mb-4 md:mb-6 animate-slide-up">
            <div className="flex justify-between items-center text-xs md:text-sm font-semibold text-gray-700 mb-2 px-1">
              <span className="flex items-center gap-1 md:gap-2">
                <span className="hidden sm:inline text-gray-500">Question</span>
                <span className="text-purple-600 text-lg md:text-xl font-bold">{currentIndex + 1}</span>
                <span className="text-gray-400 text-base">/</span>
                <span className="text-gray-500 text-base">{QUIZ_DATA.length}</span>
              </span>
              <span className="text-purple-600 font-bold text-base md:text-lg flex items-center gap-1">
                <span>{progress}%</span>
                <span className="hidden sm:inline text-xs text-gray-500">Complete</span>
              </span>
            </div>
            <div className="h-3 md:h-3.5 bg-gray-200 rounded-full overflow-hidden shadow-inner">
              <div
                className="h-full bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500 transition-all duration-500 ease-out rounded-full progress-pulse progress-bar-glow"
                style={{ width: progress + '%' }}
              />
            </div>
          </div>

          {/* Question Card with Swipe Support */}
          <div
            className="flex-1 overflow-hidden mb-4 md:mb-6"
            onTouchStart={onTouchStart}
            onTouchMove={onTouchMove}
            onTouchEnd={onTouchEnd}
          >
            <div
              key={current.id}
              className={`glass-card-dark p-5 md:p-8 lg:p-10 rounded-3xl shadow-2xl h-full overflow-y-auto transition-all duration-500 ${
                slideDirection === 'left' ? 'animate-slide-in-left' : 'animate-slide-in-right'
              }`}
            >
              {/* Question Header */}
              <div className="flex justify-between items-start mb-5 md:mb-7">
                <div className="bg-gradient-to-r from-purple-600 to-blue-500 text-white px-4 md:px-5 py-2 rounded-full text-sm md:text-base font-bold shadow-lg flex items-center gap-2">
                  <span className="text-lg">📝</span>
                  <span>Q{currentIndex + 1}</span>
                </div>
                <div className="text-4xl md:text-5xl animate-float">
                  {CHARACTER_TYPES[currentIndex % 5].emoji}
                </div>
              </div>

              {/* Question Text */}
              <h2 className="text-xl md:text-2xl lg:text-3xl font-bold text-gray-800 mb-6 md:mb-10 leading-relaxed">
                {current.question}
              </h2>

              {/* Options */}
              <div className="space-y-3 md:space-y-4">
                {current.options.map((option, idx) => {
                  const isSelected = answers[current.id] === option.weight;
                  return (
                    <button
                      key={idx}
                      onClick={() => handleSelect(option.weight)}
                      className={`w-full text-left p-4 md:p-5 lg:p-6 rounded-2xl border-2 transition-all duration-300 mobile-touch-target transform ${
                        isSelected
                          ? 'border-purple-500 bg-gradient-to-r from-purple-500 to-blue-500 text-white shadow-2xl scale-[1.02] md:scale-105 option-selected'
                          : 'border-gray-200 bg-white hover:border-purple-300 hover:shadow-xl text-gray-700 active:scale-[0.98]'
                      }`}
                    >
                      <div className="flex items-start gap-3 md:gap-4">
                        <div className={`flex-shrink-0 w-7 h-7 md:w-8 md:h-8 rounded-full border-2 flex items-center justify-center transition-all ${
                          isSelected ? 'border-white bg-white scale-110' : 'border-gray-300 bg-white'
                        }`}>
                          {isSelected && (
                            <svg className="w-5 h-5 md:w-6 md:h-6 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                              <path fillRule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clipRule="evenodd"/>
                            </svg>
                          )}
                        </div>
                        <span className="text-sm md:text-base lg:text-lg leading-relaxed flex-1 font-medium">
                          {option.text}
                        </span>
                      </div>
                    </button>
                  );
                })}
              </div>
            </div>
          </div>

          {/* Navigation Buttons */}
          <div className="flex gap-3 md:gap-4 px-1">
            <button
              onClick={handlePrev}
              disabled={currentIndex === 0}
              className={`flex-1 md:flex-initial md:w-40 px-6 py-3 md:py-4 rounded-full font-bold text-base md:text-lg transition-all duration-300 border-2 mobile-touch-target ${
                currentIndex === 0
                  ? 'opacity-40 cursor-not-allowed bg-gray-100 border-gray-200 text-gray-400'
                  : 'bg-white border-purple-400 text-gray-800 hover:bg-purple-50 hover:shadow-xl hover:border-purple-500 active:scale-95 transform hover:scale-105'
              }`}
            >
              <span className="flex items-center justify-center gap-2">
                <span className="text-xl">←</span>
                <span className="hidden sm:inline">Previous</span>
                <span className="sm:hidden">Prev</span>
              </span>
            </button>

            <button
              onClick={handleNext}
              disabled={!hasAnswer}
              className={`flex-1 md:w-64 cta px-6 py-3 md:py-4 rounded-full font-bold text-base md:text-lg transition-all duration-300 mobile-touch-target transform hover:scale-105 active:scale-95 ${
                !hasAnswer ? 'opacity-50 cursor-not-allowed' : 'glow-on-hover'
              }`}
            >
              <span className="relative z-10 flex items-center justify-center gap-2">
                {isLastQuestion ? (
                  <>
                    <span className="text-xl">🏆</span>
                    <span>Get Result</span>
                  </>
                ) : (
                  <>
                    <span>Next</span>
                    <span className="text-xl">→</span>
                  </>
                )}
              </span>
            </button>
          </div>

          {/* Swipe Hint for Mobile */}
          {showHint && (
            <div className="md:hidden text-center mt-4 text-xs text-gray-400 flex items-center justify-center gap-2 swipe-hint animate-fade-in">
              <span>👈</span>
              <span>Swipe to navigate</span>
              <span>👉</span>
            </div>
          )}
        </div>
      );
    };

    // ============= RESULT PAGE COMPONENT =============
    const ResultPage = ({ score, onRestart }) => {
      const [displayScore, setDisplayScore] = useState(0);
      const [showConfetti, setShowConfetti] = useState(false);
      const [showShare, setShowShare] = useState(false);
      const [isRevealed, setIsRevealed] = useState(false);

      const characterType = CHARACTER_TYPES.find(
        type => score >= type.range[0] && score <= type.range[1]
      );

      useEffect(() => {
        // Start confetti
        setShowConfetti(true);

        // Animate score counting up
        const duration = 2500;
        let start;
        const animate = (timestamp) => {
          if (!start) start = timestamp;
          const elapsed = timestamp - start;
          const progress = Math.min(elapsed / duration, 1);

          // Ease out cubic
          const eased = 1 - Math.pow(1 - progress, 3);
          setDisplayScore(Math.floor(eased * score));

          if (progress < 1) {
            requestAnimationFrame(animate);
          } else {
            setIsRevealed(true);
            // Haptic feedback on completion
            if (navigator.vibrate) {
              navigator.vibrate([100, 50, 100, 50, 200]);
            }
          }
        };
        requestAnimationFrame(animate);

        // Stop confetti after 5 seconds
        const confettiTimeout = setTimeout(() => setShowConfetti(false), 5000);

        return () => clearTimeout(confettiTimeout);
      }, [score]);

      const handleShare = (platform) => {
        const text = `I scored ${score}/100 on CharacterMeter! I'm a ${characterType.name} ${characterType.emoji}. What's your character type?`;
        const url = window.location.origin;

        // Haptic feedback
        if (navigator.vibrate) {
          navigator.vibrate(10);
        }

        switch(platform) {
          case 'copy':
            if (navigator.clipboard) {
              navigator.clipboard.writeText(`${text}\n\n${url}`);
            }
            alert('✅ Link copied to clipboard!');
            break;
          case 'whatsapp':
            window.open(`https://wa.me/?text=${encodeURIComponent(text + ' ' + url)}`, '_blank');
            break;
          case 'twitter':
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
            break;
          case 'facebook':
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}&quote=${encodeURIComponent(text)}`, '_blank');
            break;
          case 'linkedin':
            window.open(`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`, '_blank');
            break;
        }
        setShowShare(false);
      };

      return (
        <div className="flex flex-col items-center p-4 md:p-8 text-center min-h-[700px] relative overflow-hidden animate-fade-in">
          {showConfetti && <Confetti />}

          {/* Header */}
          <div className="mb-8 md:mb-12 animate-slide-up z-10">
            <h1 className="text-3xl md:text-5xl lg:text-6xl font-extrabold text-gray-800 mb-3 md:mb-4 leading-tight">
              Your Character <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 via-pink-500 to-blue-500">Revealed</span>
            </h1>
            <p className="text-sm md:text-lg text-gray-600">
              Based on your moral compass and ethical framework
            </p>
          </div>

          {/* Animated Score Circle */}
          <div className="relative mb-10 md:mb-14 animate-scale-in z-10">
            {/* Glow effect */}
            <div className="absolute inset-0 bg-gradient-to-r from-purple-400 via-pink-400 to-blue-400 rounded-full blur-3xl opacity-40 animate-pulse"></div>

            {/* Main circle */}
            <div className={`relative result-circle w-72 h-72 md:w-96 md:h-96 lg:w-[28rem] lg:h-[28rem] rounded-full flex flex-col items-center justify-center shadow-2xl bg-gradient-to-br ${characterType.color} overflow-hidden`}>
              {/* Outer progress ring */}
              <svg className="absolute inset-0 w-full h-full -rotate-90 z-0">
                <circle
                  cx="50%"
                  cy="50%"
                  r="42%"
                  fill="none"
                  stroke="rgba(255,255,255,0.2)"
                  strokeWidth="12"
                />
                <circle
                  cx="50%"
                  cy="50%"
                  r="42%"
                  fill="none"
                  stroke="white"
                  strokeWidth="12"
                  strokeDasharray={`${2 * Math.PI * 150}`}
                  strokeDashoffset={`${2 * Math.PI * 150 * (1 - displayScore / 100)}`}
                  className="transition-all duration-2000 ease-out"
                  strokeLinecap="round"
                  style={{ filter: 'drop-shadow(0 0 8px rgba(255,255,255,0.8))' }}
                />
              </svg>

              {/* Inner content */}
              <div className="relative z-10 flex flex-col items-center">
                {/* Score number */}
                <div className="text-8xl md:text-9xl lg:text-[10rem] font-black text-white mb-2 md:mb-4 drop-shadow-2xl">
                  {String(displayScore).split('').map((digit, i) => (
                    <span key={i} className="score-digit inline-block">
                      {digit}
                    </span>
                  ))}
                </div>

                {/* Emoji */}
                <div className="text-6xl md:text-7xl lg:text-8xl mb-2 md:mb-3 animate-bounce-in" style={{ animationDelay: '1.5s' }}>
                  {characterType.emoji}
                </div>

                {/* Character name */}
                <div className="text-2xl md:text-3xl lg:text-4xl font-bold text-white/95 px-4 mb-2 drop-shadow-lg">
                  {characterType.name}
                </div>

                {/* Score range */}
                <div className="text-sm md:text-base lg:text-lg text-white/75 font-medium">
                  Score Range: {characterType.range[0]}-{characterType.range[1]}
                </div>
              </div>
            </div>
          </div>

          {/* Character Description Card */}
          <div className="w-full max-w-3xl mb-8 md:mb-12 animate-slide-up z-10" style={{ animationDelay: '0.3s' }}>
            <div className={`glass-card-dark p-6 md:p-10 rounded-3xl shadow-2xl border-2 ${characterType.borderColor}`}>
              <div className="flex items-center justify-center gap-3 mb-5 md:mb-6">
                <span className="text-3xl md:text-4xl">{characterType.icon}</span>
                <h3 className="text-xl md:text-3xl font-bold text-gray-900">
                  Character Insight
                </h3>
              </div>
              <p className={`${characterType.textColor} text-base md:text-xl leading-relaxed italic font-medium mb-6`}>
                "{characterType.description}"
              </p>

              {/* Traits */}
              <div className="flex flex-wrap justify-center gap-2 md:gap-3">
                {characterType.traits.map((trait, idx) => (
                  <span 
                    key={idx}
                    className={`${characterType.badge} ${characterType.textColor} px-4 md:px-5 py-2 md:py-2.5 rounded-full text-sm md:text-base font-semibold shadow-md hover:shadow-lg transition-all hover:scale-105 cursor-default`}
                  >
                    {trait}
                  </span>
                ))}
              </div>
            </div>
          </div>

          {/* Stats Grid */}
          <div className="w-full max-w-3xl grid grid-cols-3 gap-3 md:gap-6 mb-8 md:mb-12 px-2 z-10">
            <div className="glass-card p-4 md:p-8 rounded-2xl md:rounded-3xl shadow-xl hover:shadow-2xl transition-shadow glow-on-hover">
              <div className="text-4xl md:text-6xl font-black text-purple-600 mb-2">
                {score}
              </div>
              <div className="text-xs md:text-base text-gray-600 font-semibold">Character Score</div>
            </div>
            <div className="glass-card p-4 md:p-8 rounded-2xl md:rounded-3xl shadow-xl hover:shadow-2xl transition-shadow glow-on-hover">
              <div className="text-4xl md:text-6xl font-black text-blue-600 mb-2">
                {QUIZ_DATA.length}
              </div>
              <div className="text-xs md:text-base text-gray-600 font-semibold">Questions</div>
            </div>
            <div className="glass-card p-4 md:p-8 rounded-2xl md:rounded-3xl shadow-xl hover:shadow-2xl transition-shadow glow-on-hover">
              <div className="text-4xl md:text-6xl mb-2">{characterType.emoji}</div>
              <div className="text-xs md:text-base text-gray-600 font-semibold">Character Type</div>
            </div>
          </div>

          {/* Share Section */}
          <div className="w-full max-w-md mb-8 z-10">
            <button
              onClick={() => setShowShare(!showShare)}
              className="w-full cta px-8 py-4 md:py-5 rounded-2xl font-bold text-base md:text-lg shadow-2xl mobile-touch-target glow-on-hover transform hover:scale-105 active:scale-95 transition-all"
            >
              <span className="relative z-10 flex items-center justify-center gap-2 md:gap-3">
                <span className="text-2xl">📱</span>
                <span>Share Your Result</span>
              </span>
            </button>

            {showShare && (
              <div className="mt-4 md:mt-6 grid grid-cols-2 gap-3 md:gap-4 mobile-menu-open">
                <button
                  onClick={() => handleShare('whatsapp')}
                  className="bg-green-500 hover:bg-green-600 text-white p-4 md:p-5 rounded-xl md:rounded-2xl font-semibold shadow-xl active:scale-95 transition-all mobile-touch-target transform hover:scale-105 flex items-center justify-center gap-2"
                >
                  <span className="text-xl">📱</span>
                  <span>WhatsApp</span>
                </button>
                <button
                  onClick={() => handleShare('twitter')}
                  className="bg-blue-400 hover:bg-blue-500 text-white p-4 md:p-5 rounded-xl md:rounded-2xl font-semibold shadow-xl active:scale-95 transition-all mobile-touch-target transform hover:scale-105 flex items-center justify-center gap-2"
                >
                  <span className="text-xl">🐦</span>
                  <span>Twitter</span>
                </button>
                <button
                  onClick={() => handleShare('facebook')}
                  className="bg-blue-600 hover:bg-blue-700 text-white p-4 md:p-5 rounded-xl md:rounded-2xl font-semibold shadow-xl active:scale-95 transition-all mobile-touch-target transform hover:scale-105 flex items-center justify-center gap-2"
                >
                  <span className="text-xl">📘</span>
                  <span>Facebook</span>
                </button>
                <button
                  onClick={() => handleShare('linkedin')}
                  className="bg-blue-700 hover:bg-blue-800 text-white p-4 md:p-5 rounded-xl md:rounded-2xl font-semibold shadow-xl active:scale-95 transition-all mobile-touch-target transform hover:scale-105 flex items-center justify-center gap-2"
                >
                  <span className="text-xl">💼</span>
                  <span>LinkedIn</span>
                </button>
                <button
                  onClick={() => handleShare('copy')}
                  className="col-span-2 bg-gray-700 hover:bg-gray-800 text-white p-4 md:p-5 rounded-xl md:rounded-2xl font-semibold shadow-xl active:scale-95 transition-all mobile-touch-target transform hover:scale-105 flex items-center justify-center gap-2"
                >
                  <span className="text-xl">📋</span>
                  <span>Copy Link</span>
                </button>
              </div>
            )}
          </div>

          {/* Action Buttons */}
          <div className="flex flex-col sm:flex-row gap-3 md:gap-4 w-full max-w-xl px-2 z-10">
            <button
              onClick={onRestart}
              className="flex-1 px-6 md:px-8 py-3 md:py-4 rounded-full font-bold text-base md:text-lg border-2 border-purple-400 text-gray-800 bg-white hover:bg-purple-50 hover:shadow-xl hover:border-purple-500 active:scale-95 transition-all mobile-touch-target transform hover:scale-105 flex items-center justify-center gap-2"
            >
              <span className="text-xl">↺</span>
              <span>Retake Test</span>
            </button>
            <button
              onClick={() => window.scrollTo({ top: 0, behavior: 'smooth' })}
              className="flex-1 cta px-6 md:px-8 py-3 md:py-4 rounded-full font-bold text-base md:text-lg mobile-touch-target glow-on-hover transform hover:scale-105 active:scale-95 transition-all flex items-center justify-center gap-2"
            >
              <span className="relative z-10 flex items-center gap-2">
                <span className="text-xl">🏆</span>
                <span>View Leaderboard</span>
              </span>
            </button>
          </div>

          {/* Fun fact */}
          <div className="mt-8 md:mt-12 text-xs md:text-sm text-gray-500 italic max-w-md z-10">
            <p>
              💡 Your score is calculated using a weighted normalization algorithm across 20 moral and ethical questions.
            </p>
          </div>
        </div>
      );
    };

    // ============= MAIN APP COMPONENT =============
    const App = () => {
      const [page, setPage] = useState('home');
      const [finalScore, setFinalScore] = useState(null);
      const [mobileMenuOpen, setMobileMenuOpen] = useState(false);

      const handleStart = () => {
        setPage('quiz');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      const handleComplete = (score) => {
        setFinalScore(score);
        setPage('result');
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      const handleRestart = () => {
        setPage('home');
        setFinalScore(null);
        setMobileMenuOpen(false);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      const navigateTo = (newPage) => {
        setPage(newPage);
        setMobileMenuOpen(false);
        window.scrollTo({ top: 0, behavior: 'smooth' });
      };

      return (
        <div className="min-h-screen">
          {/* Header */}
          <header className="sticky top-0 z-40 glass-card shadow-xl border-b border-gray-200/50">
            <nav className="max-w-7xl mx-auto px-4 py-3 md:py-4 flex justify-between items-center">
              <button 
                onClick={handleRestart}
                className="text-xl md:text-2xl lg:text-3xl font-extrabold text-gray-900 hover:text-purple-600 transition-colors flex items-center gap-2"
              >
                <span className="text-2xl md:text-3xl">🎭</span>
                <span>
                  Character
                  <span className="text-transparent bg-clip-text bg-gradient-to-r from-purple-500 to-blue-500">
                    Meter
                  </span>
                </span>
              </button>

              {/* Desktop Navigation */}
              <div className="hidden md:flex gap-2 lg:gap-3">
                <a
                  href="index.html"
                  className={`px-4 lg:px-5 py-2 lg:py-2.5 rounded-full text-sm lg:text-base font-semibold transition-all mobile-touch-target ${
                    page === 'home'
                      ? 'bg-purple-600 text-white shadow-lg'
                      : 'text-gray-600 hover:bg-purple-50 hover:text-purple-600'
                  }`}
                >
                  Home
                </a>
                {finalScore && (
                  <button
                    onClick={() => navigateTo('result')}
                    className={`px-4 lg:px-5 py-2 lg:py-2.5 rounded-full text-sm lg:text-base font-semibold transition-all mobile-touch-target ${
                      page === 'result'
                        ? 'bg-purple-600 text-white shadow-lg'
                        : 'text-gray-600 hover:bg-purple-50 hover:text-purple-600'
                    }`}
                  >
                    Result
                  </button>
                )}
              </div>

              {/* Mobile Menu Button */}
              <button
                onClick={() => setMobileMenuOpen(!mobileMenuOpen)}
                className="md:hidden p-2 rounded-lg hover:bg-gray-100 active:scale-95 transition-all"
              >
                <div className="w-6 h-5 flex flex-col justify-between">
                  <span className={`w-full h-0.5 bg-gray-800 rounded transition-all duration-300 ${mobileMenuOpen ? 'rotate-45 translate-y-2' : ''}`}></span>
                  <span className={`w-full h-0.5 bg-gray-800 rounded transition-all duration-300 ${mobileMenuOpen ? 'opacity-0' : ''}`}></span>
                  <span className={`w-full h-0.5 bg-gray-800 rounded transition-all duration-300 ${mobileMenuOpen ? '-rotate-45 -translate-y-2' : ''}`}></span>
                </div>
              </button>
            </nav>

            {/* Mobile Menu Dropdown */}
            {mobileMenuOpen && (
              <div className="md:hidden glass-card border-t border-gray-200/50 shadow-xl mobile-menu-open">
                <div className="px-4 py-3 space-y-2">
                  <a
                    href="index.html"
                    className={`w-full text-left px-4 py-3 rounded-xl text-base font-semibold transition-all ${
                      page === 'home' 
                        ? 'bg-purple-600 text-white shadow-md' 
                        : 'text-gray-700 hover:bg-purple-50'
                    }`}
                  >
                    🏠 Home
                  </a>
                  {finalScore && (
                    <button
                      onClick={() => navigateTo('result')}
                      className={`w-full text-left px-4 py-3 rounded-xl text-base font-semibold transition-all ${
                        page === 'result' 
                          ? 'bg-purple-600 text-white shadow-md' 
                          : 'text-gray-700 hover:bg-purple-50'
                      }`}
                    >
                      🏆 Result
                    </button>
                  )}
                </div>
              </div>
            )}
          </header>

          {/* Main Content */}
          <main className="max-w-7xl mx-auto p-2 md:p-4 lg:p-6">
            <div className="glass-card rounded-3xl shadow-2xl p-4 md:p-6 lg:p-10 min-h-[calc(100vh-120px)]">
              {page === 'home' && <HomePage onStart={handleStart} />}
              {page === 'quiz' && <QuizPage onComplete={handleComplete} />}
              {page === 'result' && finalScore && <ResultPage score={finalScore} onRestart={handleRestart} />}
            </div>
          </main>

          {/* Footer */}
          <footer className="max-w-7xl mx-auto px-4 py-6 md:py-8 text-center text-sm text-gray-500">
            <p>
              Made with ❤️ by CharacterMeter Team • 
              <a href="#" className="text-purple-600 hover:text-purple-700 ml-1">Privacy Policy</a> • 
              <a href="#" className="text-purple-600 hover:text-purple-700 ml-1">Terms of Service</a>
            </p>
            <p className="mt-2 text-xs">
              © 2025 CharacterMeter. All rights reserved.
            </p>
          </footer>
        </div>
      );
    };

    // ============= RENDER APP =============
    const root = ReactDOM.createRoot(document.getElementById('app'));
    root.render(<App />);
  </script>
</body>
</html>
